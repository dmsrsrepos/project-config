/* eslint-disable */
// This file is generated by `reactive-meta-gen`. Do not modify manually.
// @see https://github.com/open-dmsrs/reactive-meta-gen
/**
  //ConfigObject<Demo> of `project-kit.demo`
  //@example demo
  const demo = useConfigObjectDemo()
  const oldVal:string = demo.description //get value
  demo.$update("description", oldVal) //update value
 */
/**
  //ToConfigRefs<Demo> of `project-kit.demo`
  //@example demo
  const demo = useConfigDemo()
  const oldVal:string = demo.description.value //get value
  demo.description.update(oldVal) //update value
 */
/**
  //ConfigObject<FileNestingUpdater> of `project-kit.fileNestingUpdater`
  //@example fileNestingUpdater
  const fileNestingUpdater = useConfigObjectFileNestingUpdater()
  const oldVal:boolean = fileNestingUpdater.autoUpdate //get value
  fileNestingUpdater.$update("autoUpdate", oldVal) //update value
 */
/**
  //ToConfigRefs<FileNestingUpdater> of `project-kit.fileNestingUpdater`
  //@example fileNestingUpdater
  const fileNestingUpdater = useConfigFileNestingUpdater()
  const oldVal:boolean = fileNestingUpdater.autoUpdate.value //get value
  fileNestingUpdater.autoUpdate.update(oldVal) //update value
 */
/**
  //ConfigObject<ProjectKit> of `project-kit`
  //@example projectKit
  const projectKit = useConfigObjectProjectKit()
  const oldVal:object = projectKit.runonsave //get value
  projectKit.$update("runonsave", oldVal) //update value
 */
/**
  //ToConfigRefs<ProjectKit> of `project-kit`
  //@example projectKit
  const projectKit = useConfigProjectKit()
  const oldVal:object = projectKit.runonsave.value //get value
  projectKit.runonsave.update(oldVal) //update value
 */
// Meta info
import { defineConfigObject, defineConfigs, useCommand as useReactiveCommand, useCommands as useReactiveCommands, useLogger as useReactiveLogger, useOutputChannel as useReactiveOutputChannel, useStatusBarItem, useDisposable, } from 'reactive-vscode';
import type { Nullable, UseStatusBarItemOptions } from 'reactive-vscode';
export const publisher = "cnjimbo";
export const name = "project-kit";
export const version = "1.1.2";
export const displayName = "Project Kit";
export const description = "Export current settings to workspace config file ";
export const extensionId = "cnjimbo.project-kit";
type Cache<T> = Record<string, {
    exp: number | null;
    value: T;
    dispose: () => void;
}>;
const memoize = <TArgs extends any[], TResult>(cache: Cache<TResult>, func: (...args: TArgs) => TResult, keyFunc: ((...args: TArgs) => string) | null, ttl: number | null) => {
    return function callWithMemo(...args: any): TResult {
        const key = keyFunc ? keyFunc(...args) : JSON.stringify({ args });
        const existing = cache[key];
        if (existing !== undefined) {
            if (!existing.exp)
                return existing.value;
            if (existing.exp > new Date().getTime()) {
                return existing.value;
            }
        }
        const result = func(...args);
        cache[key] = {
            exp: ttl ? new Date().getTime() + ttl : null,
            value: result,
            dispose: () => {
                delete cache[key];
            }
        };
        useDisposable(cache[key]);
        return result;
    };
};
/**
 * Creates a memoized function. The returned function
 * will only execute the source function when no value
 * has previously been computed. If a ttl (milliseconds)
 * is given previously computed values will be checked
 * for expiration before being returned.
 */
export const memo = <TArgs extends any[], TResult>(func: (...args: TArgs) => TResult, options: {
    key?: (...args: TArgs) => string;
    ttl?: number;
} = {}) => {
    return memoize({}, func, options.key ?? null, options.ttl ?? null) as (...args: TArgs) => TResult;
};
export interface CommandsInformation {
    /**
     *  category string by which the command is grouped in the UI
     */
    category?: string;
    /**
     * identifier of the command to execute
     */
    command: string;
    /**
     * title which the command is represented in the UI
     */
    title: string;
    enablement?: string;
    icon?: string;
    shortTitle?: string;
    commandShorthandName?: string;
}
/**
 * Type union of all commands
 */
export type Command = "project-kit.manualUpdate" | "project-kit.change-annnotations" | "project-kit.stop-watch" | "project-kit.enableRunOnSave" | "project-kit.disableRunOnSave" | "project-kit.updateDes" | "project-kit.sayHello" | "project-kit.sayGoodbye";
/**
 * Commands map registed by `cnjimbo.project-kit`
 */
export const commands = {
    /**
     * Update config now
     * @command `project-kit.manualUpdate`
     */
    manualUpdate: "project-kit.manualUpdate",
    /**
     * Change annotations
     * @command `project-kit.change-annnotations`
     */
    changeAnnnotations: "project-kit.change-annnotations",
    /**
     * Stop watch
     * @command `project-kit.stop-watch`
     */
    stopWatch: "project-kit.stop-watch",
    /**
     * Run On Save: Enable
     * @command `project-kit.enableRunOnSave`
     */
    enableRunOnSave: "project-kit.enableRunOnSave",
    /**
     * Run On Save: Disable
     * @command `project-kit.disableRunOnSave`
     */
    disableRunOnSave: "project-kit.disableRunOnSave",
    /**
     * Update demo des
     * @command `project-kit.updateDes`
     */
    updateDes: "project-kit.updateDes",
    /**
     * SayHello
     * @command `project-kit.sayHello`
     */
    sayHello: "project-kit.sayHello",
    /**
     * SayGoodbye
     * @command `project-kit.sayGoodbye`
     */
    sayGoodbye: "project-kit.sayGoodbye",
} satisfies Record<string, Command> as Record<string, Command>;
/**
 * Commands map registed by `cnjimbo.project-kit`
 */
export const commandsInformation = {
    /**
     * Update config now
     * @command `project-kit.manualUpdate`
     */
    "project-kit.manualUpdate": { "commandShorthandName": "manualUpdate", "title": "Update config now", "command": "project-kit.manualUpdate", "category": "Project Kit", "enablement": "s", "icon": "$(zap)", "shortTitle": "shortTitle" },
    /**
     * Change annotations
     * @command `project-kit.change-annnotations`
     */
    "project-kit.change-annnotations": { "commandShorthandName": "changeAnnnotations", "title": "change annotations", "command": "project-kit.change-annnotations", "category": "Project Kit" },
    /**
     * Stop watch
     * @command `project-kit.stop-watch`
     */
    "project-kit.stop-watch": { "commandShorthandName": "stopWatch", "title": "stop watch", "command": "project-kit.stop-watch", "category": "Project Kit" },
    /**
     * Run On Save: Enable
     * @command `project-kit.enableRunOnSave`
     */
    "project-kit.enableRunOnSave": { "commandShorthandName": "enableRunOnSave", "title": "Run On Save: Enable", "command": "project-kit.enableRunOnSave" },
    /**
     * Run On Save: Disable
     * @command `project-kit.disableRunOnSave`
     */
    "project-kit.disableRunOnSave": { "commandShorthandName": "disableRunOnSave", "title": "Run On Save: Disable", "command": "project-kit.disableRunOnSave" },
    /**
     * Update demo des
     * @command `project-kit.updateDes`
     */
    "project-kit.updateDes": { "commandShorthandName": "updateDes", "title": "Update demo des", "command": "project-kit.updateDes", "category": "Project Demo" },
    /**
     * SayHello
     * @command `project-kit.sayHello`
     */
    "project-kit.sayHello": { "commandShorthandName": "sayHello", "title": "sayHello", "command": "project-kit.sayHello", "category": "Demo", "enablement": "s", "icon": "$(zap)", "shortTitle": "Hello shortTitle" },
    /**
     * SayGoodbye
     * @command `project-kit.sayGoodbye`
     */
    "project-kit.sayGoodbye": { "commandShorthandName": "sayGoodbye", "title": "sayGoodbye", "command": "project-kit.sayGoodbye", "category": "Demo", "enablement": "s", "icon": "$(zap)", "shortTitle": "Bye shortTitle" },
} satisfies Record<Command, CommandsInformation> as Record<Command, CommandsInformation>;
/**
 * Register a command. See `vscode::commands.registerCommand`.
 */
export const useCommand = (commandFullKey: Command, callback: (...args: any[]) => any): void => useReactiveCommand(commandFullKey, callback);
/**
 * Register multiple commands. See `vscode::commands.registerCommand`.
 */
export const useCommands = (commands: Partial<Record<Command, (...args: any[]) => any>>): void => useReactiveCommands(commands);
/**
 * Name type of Logger and OutputChannel
 */
export type LoggerName = typeof name | typeof displayName | typeof extensionId;
/**
 * Creates a logger that writes to the output channel.
 */
export const useLogger = (loggerName: LoggerName = displayName ?? name ?? extensionId, getPrefix?: ((type: string) => string) | null) => useReactiveLogger(loggerName, { 'getPrefix': getPrefix });
/**
 * @reactive `window.createOutputChannel`
 */
export const useOutputChannel = (outputName: LoggerName = displayName ?? name ?? extensionId) => useReactiveOutputChannel(outputName);
export const putRight = (target: Nullable<string>, curr: string) => target ? ''.concat(curr).concat(target) : curr;
export const putLeft = (target: Nullable<string>, curr: string) => target ? ''.concat(target).concat(curr) : curr;
/**
 * Create a statusBarItem with a commmand id
 */
export const useStatusBarItemFromCommand = memo((command: Command) => {
    const cmd = commandsInformation[command];
    return useStatusBarItem({
        id: cmd.commandShorthandName,
        command: cmd.command,
        name: cmd.command,
        text: putLeft(cmd.icon, cmd.shortTitle ?? cmd.title ?? cmd.commandShorthandName),
        tooltip: putLeft(cmd.category, ":").concat(cmd.title ?? cmd.shortTitle ?? cmd.commandShorthandName)
    });
});
/**
 * Create a option of statusBarItem with a commmand id
 */
export const statusBarItemOption = (command: Command): UseStatusBarItemOptions => {
    const cmd = commandsInformation[command];
    return {
        id: cmd.commandShorthandName,
        command: cmd.command,
        name: cmd.command,
        text: putLeft(cmd.icon, cmd.shortTitle ?? cmd.title ?? cmd.commandShorthandName),
        tooltip: putLeft(cmd.category, ":").concat(cmd.title ?? cmd.shortTitle ?? cmd.commandShorthandName)
    };
};
/**
 * Update config now
 * @command Register a command `project-kit.manualUpdate`
 */
export const useCommandManualUpdate = (callback: (...args: any[]) => any) => useCommand(commands.manualUpdate, callback);
/**
 * Change annotations
 * @command Register a command `project-kit.change-annnotations`
 */
export const useCommandChangeAnnnotations = (callback: (...args: any[]) => any) => useCommand(commands.changeAnnnotations, callback);
/**
 * Stop watch
 * @command Register a command `project-kit.stop-watch`
 */
export const useCommandStopWatch = (callback: (...args: any[]) => any) => useCommand(commands.stopWatch, callback);
/**
 * Run On Save: Enable
 * @command Register a command `project-kit.enableRunOnSave`
 */
export const useCommandEnableRunOnSave = (callback: (...args: any[]) => any) => useCommand(commands.enableRunOnSave, callback);
/**
 * Run On Save: Disable
 * @command Register a command `project-kit.disableRunOnSave`
 */
export const useCommandDisableRunOnSave = (callback: (...args: any[]) => any) => useCommand(commands.disableRunOnSave, callback);
/**
 * Update demo des
 * @command Register a command `project-kit.updateDes`
 */
export const useCommandUpdateDes = (callback: (...args: any[]) => any) => useCommand(commands.updateDes, callback);
/**
 * SayHello
 * @command Register a command `project-kit.sayHello`
 */
export const useCommandSayHello = (callback: (...args: any[]) => any) => useCommand(commands.sayHello, callback);
/**
 * SayGoodbye
 * @command Register a command `project-kit.sayGoodbye`
 */
export const useCommandSayGoodbye = (callback: (...args: any[]) => any) => useCommand(commands.sayGoodbye, callback);
/**
 * Section Type of `project-kit.demo`
 */
export interface Demo {
    /**
     * Used for demo configuration
     */
    "description": string;
}
/**
 * Section Type of `project-kit.fileNestingUpdater`
 */
export interface FileNestingUpdater {
    /**
     * Fetch and update the latest config automatically
     */
    "autoUpdate": boolean;
    /**
     * The upstream repo you want to update from
     */
    "upstreamRepo": string;
    /**
     * The branch name of upstream repo
     */
    "upstreamBranch": string;
    /**
     * Should show up the prompt before doing auto update
     */
    "promptOnAutoUpdate": boolean;
    /**
     * The minimal interval for auto update, in minutes
     */
    "autoUpdateInterval": number;
}
/**
 * Section Type of `project-kit`
 */
export interface ProjectKit {
    /**
     *
     */
    "runonsave": {
        /**
       * Shell to execute the command with (gets passed to child_process.exec as an options arg. e.g. child_process(cmd, { shell }).
       * @default `undefined`
       */
        'shell'?: string;
        /**
         * @default `[]`
         */
        'commands': {
            /**
       * Command to execute on save.
       * @default `"echo ${file}"`
       */
            'cmd': string;
            /**
             * Regex for matching files to run commands on
             * NOTE: This is a regex and not a file path spce, so backslashes have to be escaped. They also have to be escaped in json strings, so you may have to double escape them in certain cases such as targetting contents of folders.
             * e.g.
             * "match": "some\\\\directory\\\\.*"
             * @default `".*"`
             */
            'match': string;
            /**
             * Run command asynchronously.
             * @default `false`
             */
            'isAsync': boolean;
            /**
             * Regex for matching files *not* to run commands on.
             * @default `".*"`
             */
            'notMatch': string;
        }[];
        /**
         * Automatically clear the console on each save before running commands.
         * @default `false`
         */
        'autoClearConsole': boolean;
    };
}
const configsDefaults = {
    /**
     * Config defaults of `project-kit.demo`
     */
    "project-kit.demo": {
        /**
         * Used for demo configuration
         */
        "description": "default demo string",
    } satisfies Demo as Demo,
    /**
     * Config defaults of `project-kit.fileNestingUpdater`
     */
    "project-kit.fileNestingUpdater": {
        /**
         * Fetch and update the latest config automatically
         */
        "autoUpdate": true,
        /**
         * The upstream repo you want to update from
         */
        "upstreamRepo": "antfu/vscode-file-nesting-config",
        /**
         * The branch name of upstream repo
         */
        "upstreamBranch": "main",
        /**
         * Should show up the prompt before doing auto update
         */
        "promptOnAutoUpdate": true,
        /**
         * The minimal interval for auto update, in minutes
         */
        "autoUpdateInterval": 4320,
    } satisfies FileNestingUpdater as FileNestingUpdater,
    /**
     * Config defaults of `project-kit`
     */
    "project-kit": {
        /**
         *
         */
        "runonsave": { "shell": undefined, "commands": [], "autoClearConsole": false },
    } satisfies ProjectKit as ProjectKit,
};
/**
 * List of section names.
 */
export type SectionName = keyof typeof configsDefaults;
/**
 * Shorthand of config section name.
 */
export const configs = {
    demo: "project-kit.demo",
    fileNestingUpdater: "project-kit.fileNestingUpdater",
    projectKit: "project-kit",
} satisfies Record<string, SectionName>;
/**
 * Define configurations of an extension. See `vscode::workspace.getConfiguration`.
 */
export const useConfig = memo(<Section extends SectionName>(section: Section) => defineConfigs<typeof configsDefaults[Section]>(section, configsDefaults[section]));
/**
 * Define configurations of an extension. See `vscode::workspace.getConfiguration`.
 */
export const useConfigObject = memo(<Section extends SectionName>(section: Section) => defineConfigObject<typeof configsDefaults[Section]>(section, configsDefaults[section]));
/**
 * ConfigObject<Demo> of `project-kit.demo`
 */
export const useConfigObjectDemo = () => useConfigObject(configs.demo);
/**
 * ToConfigRefs<Demo> of `project-kit.demo`
 */
export const useConfigDemo = () => useConfig(configs.demo);
/**
 * ConfigObject<FileNestingUpdater> of `project-kit.fileNestingUpdater`
 */
export const useConfigObjectFileNestingUpdater = () => useConfigObject(configs.fileNestingUpdater);
/**
 * ToConfigRefs<FileNestingUpdater> of `project-kit.fileNestingUpdater`
 */
export const useConfigFileNestingUpdater = () => useConfig(configs.fileNestingUpdater);
/**
 * ConfigObject<ProjectKit> of `project-kit`
 */
export const useConfigObjectProjectKit = () => useConfigObject(configs.projectKit);
/**
 * ToConfigRefs<ProjectKit> of `project-kit`
 */
export const useConfigProjectKit = () => useConfig(configs.projectKit);
